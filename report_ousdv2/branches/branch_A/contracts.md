# Branch A Contracts

## Inventory
| Contract | Path | Responsibilities | Key entrypoints (external/public) | External deps |
|---|---|---|---|---|
| CrossChainMasterStrategy | contracts/contracts/strategies/crosschain/CrossChainMasterStrategy.sol | Mainnet strategy that bridges USDC to peer chain, caches remote balance, and updates vault accounting (CrossChainMasterStrategy.remoteStrategyBalance/pendingAmount/checkBalance) (contracts/contracts/strategies/crosschain/CrossChainMasterStrategy.sol:29,33,141). | initialize, deposit, depositAll, withdraw, withdrawAll, checkBalance (contracts/contracts/strategies/crosschain/CrossChainMasterStrategy.sol:64,83,93,102,112,141). | AbstractCCTPIntegrator, CrossChainStrategyHelper, SafeERC20/IERC20 (contracts/contracts/strategies/crosschain/CrossChainMasterStrategy.sol:12-15). |
| CrossChainRemoteStrategy | contracts/contracts/strategies/crosschain/CrossChainRemoteStrategy.sol | Remote-chain strategy: receives bridged USDC, deposits into ERC-4626 vault, processes withdraw requests, sends balance updates (contracts/contracts/strategies/crosschain/CrossChainRemoteStrategy.sol:170,241,376). | initialize, deposit, depositAll, withdraw, withdrawAll, sendBalanceUpdate, checkBalance (contracts/contracts/strategies/crosschain/CrossChainRemoteStrategy.sol:79,103,114,125,134,360,376). | AbstractCCTPIntegrator, Generalized4626Strategy, IERC4626 (contracts/contracts/strategies/crosschain/CrossChainRemoteStrategy.sol:15-20). |
| AbstractCCTPIntegrator | contracts/contracts/strategies/crosschain/AbstractCCTPIntegrator.sol | CCTP integration: message handling, relay, nonce tracking, token bridging (contracts/contracts/strategies/crosschain/AbstractCCTPIntegrator.sol:290,312,433,538,588). | setOperator, setMinFinalityThreshold, setFeePremiumBps, handleReceiveFinalizedMessage, handleReceiveUnfinalizedMessage, relay (contracts/contracts/strategies/crosschain/AbstractCCTPIntegrator.sol:215,235,262,290,312,433). | ICCTPTokenMessenger, ICCTPMessageTransmitter (contracts/contracts/strategies/crosschain/AbstractCCTPIntegrator.sol:14). |
| CrossChainStrategyHelper | contracts/contracts/strategies/crosschain/CrossChainStrategyHelper.sol | Message encoding/decoding and CCTP header parsing (contracts/contracts/strategies/crosschain/CrossChainStrategyHelper.sol:107,147,189,235). | encodeDepositMessage, encodeWithdrawMessage, encodeBalanceCheckMessage, decodeMessageHeader (contracts/contracts/strategies/crosschain/CrossChainStrategyHelper.sol:107,147,189,235). | BytesHelper (contracts/contracts/strategies/crosschain/CrossChainStrategyHelper.sol:11). |
| CrossChainStrategyProxy | contracts/contracts/proxies/create2/CrossChainStrategyProxy.sol | Create2 proxy delegating to master or remote strategy implementations (contracts/contracts/proxies/create2/CrossChainStrategyProxy.sol:15-21). | constructor (proxy initialization via InitializeGovernedUpgradeabilityProxy2) (contracts/contracts/proxies/create2/CrossChainStrategyProxy.sol:20). | InitializeGovernedUpgradeabilityProxy2 (contracts/contracts/proxies/create2/CrossChainStrategyProxy.sol:4). |
| InitializeGovernedUpgradeabilityProxy | contracts/contracts/proxies/InitializeGovernedUpgradeabilityProxy.sol | Governor-controlled upgradeability proxy (initialize/upgradeTo/upgradeToAndCall) (contracts/contracts/proxies/InitializeGovernedUpgradeabilityProxy.sol:38,76,89). | initialize, upgradeTo, upgradeToAndCall (contracts/contracts/proxies/InitializeGovernedUpgradeabilityProxy.sol:38,76,89). | Governable, Address (contracts/contracts/proxies/InitializeGovernedUpgradeabilityProxy.sol:4-7). |
| OUSD Vault (multi-asset) | contracts/contracts/vault/VaultCore.sol, VaultAdmin.sol, VaultStorage.sol | Vault accounting, allocation per asset, rebase logic (VaultCore._allocate/_rebase) (contracts/contracts/vault/VaultCore.sol:321,369). | mint, allocate, rebase, checkBalance; admin functions (VaultCore.mint/allocate/rebase/checkBalance) (contracts/contracts/vault/VaultCore.sol:61,376,359,540). | IStrategy, OUSD, SafeERC20 (contracts/contracts/vault/VaultCore.sol:14,17; contracts/contracts/vault/VaultStorage.sol:14-18). |
| OUSD token | contracts/contracts/token/OUSD.sol | Supply changes on rebase via changeSupply (contracts/contracts/token/OUSD.sol:597). | changeSupply (contracts/contracts/token/OUSD.sol:597). | Governable access control (contracts/contracts/token/OUSD.sol:597). |

## Deploy scripts (Phase 2 relevant)
- Create2 proxy on mainnet/base: contracts/deploy/mainnet/165_crosschain_strategy_proxies.js:4; contracts/deploy/base/040_crosschain_strategy_proxies.js:4.
- Master strategy impl (mainnet): contracts/deploy/mainnet/166_crosschain_strategy.js:9.
- Remote strategy impl (base): contracts/deploy/base/041_crosschain_strategy.js:9.
- CCTP domain IDs: contracts/utils/cctp.js:3.
