const { createFixtureLoader, beaconChainFixture } = require("../_fixture");

const addresses = require("../../utils/addresses");
const { impersonateAndFund } = require("../../utils/signers");
const { calcBlockTimestamp, hashPubKey } = require("../../utils/beacon");
const loadFixture = createFixtureLoader(beaconChainFixture);
const { resolveContract } = require("../../utils/resolvers");
const { expect } = require("chai");

const secondClusterPubKeys = [
  "0xb7e1156c6ca50c42f60fc3503d435ecc430614d9d0304442d0badea7c648de854fa1b37c3125c8ff4de9ca765823eefd",
  "0xace3a5e7b04a2f9b8ddc79524181571654c4e9569d571c3d0a9742fa0fe2db8d54014fb72cfa74a5e23b9676e461fdc9",
  "0xa018a0216aa11b0ab61e7adcd9bd163f567e4b5ed7de3a89c6488efc932d7965bf708999c9fe28ce37a165b8161d5681",
  "0xa032b875e9d6bbeab98d6b060bcb3a145ec666d50c80aa6be6aaa4684d57402c01caf80ae28ee94a81fabbf50e9bd249",
  "0xa0667d5b740b71b8ae50c07d695c1f1e4363fc52057a931dfec42c389069bfa3eed9acc5312044d3896f1cdb2d54d3df",
  "0xa241e3d37b54f92c965fb3c390b900d85f416c47b7d4057331620b359e9c8f34f265cc532ca52403c59f2fca42e7c9f2",
  "0xa2f883624840cb5bf744c23c477efdcb3e7cccfbbd5bb7eef00a7fd9860765f9a1c82616e5107fada49d2786c239c8ae",
  "0xa9da10b01962ca118b3ad409f384ec1acf2c76020633b5c80bc432a52c2413df5aeef0a6c7d3cf6c69d79278c2d1ac91",
  "0xabad67a3625c14e85922aa72f452df88bffc7a2d30e2916dbfe78f174c699cde529b8c30cef43ad43c2734b857999a0c",
  "0xae12edc5d57aa4999038c8968184af8236d551e7051df5c8682dc984638cec4716c23cd40a65eb9a3fd8ba73e9877c0c",
  "0xb9081e786155204e9d6d8739651bffd7e019c9104fcff1b9598cdbe596cea1fae99a99ad8cac9647be2001317da07b91",
  "0x84bfb105e60735a20ba9a4c2ce8e8a117a1fb9c66e8cc20ce1d880de69cb093c068bbe72924e272098d7018eca2ed130",
  "0x851149b79b15b1bfc02f70d04860c64ba85ff0e63765d42fe39117f38ef66f3bfbf071c3241ae0d96917f175b1379e37",
  "0x870d2a79d2ca276158b62b10ccfc608b8435c8df8d0d1f5bb1290dd4fd396759843248fd7877be8bc2183684ab07bcfe",
  "0x8757a40dc9a2351536654a1d82cc01f8bf2acd1a04c2cbc4e7a50310ba3a9bd932980b4e531dcadcdf65361691896590",
  "0x897fc84f154b2a2be55058a7a2c122cbc48bdf1d4f030a6d1d0216caeb0f51ff777c23b6dc4601006a6e6ebed38be081",
  "0x8a8c7ace7d84cb3cba43cafb5bc21b84df457d51b57c3c63dadd2dd4c093e17cfc95a07fde55cdc9225978df8f095bc4",
  "0x8e44878278bbd96c980b66a74ffc9b71a835f3991064a645d7e1836d99de6acfd6c7061148d5034f6959e69f419f44a9",
  "0x8ed6e3d45faed1f149ce35f8f0371e922cc4ff99e93cd938fde696acab2be58c09adb4c3909b54f22aa5325fefcf5a74",
  "0xa0feaa07399cd3635f881f54d8ebb51c4bedf376149f4c649a5ab5a1f1eae8ea4759dd5e3521a9f367e09dcc9182cdea",
  "0xa8188c3d4618f4e45c8fc0d8e4b686e92c7b128993a2efefd5c8edc9f1ed5c5a5b0421be6c6e01284c4be778b8d351af",
  "0xaa70003c8439881aaa268e71fe5290185a4f66f51597f883837fea71690b419bfc2ebcd02fb21386feea7c8ac41a8ed8",
  "0xab4d5f12e16034a72244f9f1a1a3ac9d4951b58106f89c604e5631530dc2accd7e5f24e7150ad5e1cbe899f1eaf1ce7d",
  "0xacf48a22e69b0ba9df39d775b1799f6bceeeb0888c39fb909b3c9af4b95c7d85907b1fac37a3abe249981cdec3f52426",
  "0xad4ccd890dff1e95993158c64790fcd51b44245858173619976532ab6044f584e23b09445f1ca0207161cd2ce831249a",
  "0xb8d868f540cdaeac91ee049382049d6263a04ad0cd7e89f61992f4626640a22225975bc14ca896f8a62203629411447f",
  "0xb97684ed60df7e58d33819e522bf248b87ed2ca431f2458d9e4bc95a43715266bbc3fb510923d51a683ab2380098de70",
  "0x80a5f26411ffab3778166b6614551b2aa8cc73f56f9d36958cffad0ffa37c10bb629ba9101df605849f5b69248893d12",
  "0x8d2e3214eb39d8db9a486975a0f71bda253a332938341fcddeb2ca7ffe8e18d5ce99d4844e5acd3f05110734ce43afa2",
  "0x8d411e1ac3d246897d5e977722ab79e22b8f4692393770928c201ac88b98431676ab56833179fffd761ee47ba02e567b",
  "0x8d875da93d02e3c0fb90ab11a4b079f8b2f9d83035ecdccf55df17afc9ae5b352674d08daf766fb2d30f39bce1ce29ba",
  "0x90d1cd1c19af352d82363eca0f0fdd9d35a7fde98240f217d136c8e7841ab091d7a1a78d396542abf9b5cb1c8035f8ea",
  "0x94d22fce3edc96965d2cf289969fb3099101761534bfe9d029edb319a683cadb295bf02c0610b98c91c91a904db03611",
  "0xa1b4899e5460428df7b66007cccad6dee6ce3183b856897070d23cf4cb8de7fb8a1bf02a42e5b4a761cf68adcf2dc5ae",
  "0xa4f24e7e1d3ec6b56d6085f2c15d6f19ebefe2e5d8c08de58830ef254131c34c8bc5a6a85b1daf60ff3331c05790929b",
  "0xa577f2c72d35d5dff2d76cc8169e32c32a9a114c904dff1094d86f2efe6021b795e63671e1464a0741f015ed73ada55e",
  "0xab14b385b3cf1ba09048d7177eaab385cb9a3b3ad4a44e6c6c714811b9ee1cfe9243aaf212957e7306567df8f92b962f",
  "0xab53c575fc015ba508aca923062903cb6b7635d09835fd5825d98dcfde4da7445ca1ac5db52e094d4c32204344999647",
  "0xb065146c773f831935702bb58d0fae499cf8e3c89db491efeb04e1545aee69dc3c077e5d5e470bbc888dbf3478891bc8",
];

const activeTargetPubKey =
  "0xb5d37226e27e0ab066541ccb795e04149300bb8c0b0fd528785f6a940e94c624b65ef1eb771f78a5f2685317b7e6f34f";

describe("ForkTest: Consolidation of Staking Strategies", function () {
  this.timeout(0);

  let fixture;
  let nativeStakingStrategy2;
  //   let nativeStakingStrategy3;
  let compoundingStakingStrategy;
  let consolidationController;
  let adminSigner;
  let registratorSigner;

  beforeEach(async () => {
    fixture = await loadFixture();
    nativeStakingStrategy2 = await resolveContract(
      "NativeStakingSSVStrategy2Proxy",
      "NativeStakingSSVStrategy"
    );
    // nativeStakingStrategy3 = await resolveContract(
    //   "NativeStakingSSVStrategy3Proxy",
    //   "NativeStakingSSVStrategy"
    // );
    compoundingStakingStrategy = await resolveContract(
      "CompoundingStakingSSVStrategyProxy",
      "CompoundingStakingSSVStrategy"
    );
    registratorSigner = await impersonateAndFund(
      addresses.mainnet.validatorRegistrator
    );
    adminSigner = await impersonateAndFund(addresses.mainnet.Guardian);
    consolidationController = await resolveContract("ConsolidationController");
  });

  describe("When no consolidation in process", () => {
    beforeEach(async () => {
      const { beaconRoots } = fixture;

      // 1. Verify the deposit to the target validator so it becomes Active
      const pendingDepositRoot =
        "0x78064553d435f3967fac15770e814581d47ff07d01f38e35450cb0c45fc17cae";
      const depositProofs = {
        firstPendingDeposit: {
          slot: 18819379,
          proof:
            "0x0000000000000000000000000000000000000000000000000000000000000000f5a5fd42d16a20302798ef6ed309979b43003d2320d9f0e8ea9831a92759fb4b488433761da1faf45c9ecd379370ffe5916157fa4efa1f9f8d0c7a68c3182242a1ba21e0229abe6e4d703fa718a7ca2bb47f339782823adf66b851482c17a9c4633ab0630569adcea3b51d2dd5688ea3cc5fcac0077e4cedc2b762ed20927a6fd28abb67dedfbb13b51c7b9e1fb7edf5ee19928f4a87782fd90a988ac1cbbd0bd6575088af12fbd67398d98ea6c5e8bc703a967dfad707f1f81c3cbcec71097bf04ac6c590a35901522f1162f2dd3c96aa86cc720653b37d4cdce9b7fbfa2567fa2f99ee7bf5da7df1bfd244cfb006eec07987cae586efa3d13dca371c3d6ed75d7b4d264f3b70daac0a5849cba620cfa6fb97a02baa83379dae48bbf383d94c57762d23d2c7cc173f353a444542abd532abe1dcdc41e6fb45268c0f5003c08f311e676d60b00c1c0045bb929144dd1e0fb8657ea6c3b5645565bc5952395df9ef541cd820e82540899d51f88c6019a9b6f5ae6bba6bec5bdd64a24e527bb87c6fa9a2a71c02a76c9297d19acb080c7f5bfdfb51cc5892db53c64943b8bb0398989b6f4032f4af1f3ca499ef016d91c072b9f014023bc0446e4f6919449a3d76880d4c88d8ae7393086eb1265b37d57d0702ae653f6897fc44d4467175969473a01f52d3f59e3d63b36ef0916197c82d18f252abce49965df8a6197a2014972ff931ccaaaec886819a87c62ce5f83c562a088bf4f6884e698d22aad234cbfa37b2d6f24ef16b7d610401977e6cda9c7e0bf5e39d9ba420ae9e237d7a6bcf91de8fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a4f893e908917775b62bff23294dbbe3a1cd8e6cc1c35b4801887b646a6f81f17fcddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a4676502a4000000000000000000000000000000000000000000000000000000000000670b7aa9f61270fa6ccad04f8cd8a5f8cc71eb4876783fa54f8225ce0087d1563dc7babdd64f232a41e45aca37953a55ab14be47661c4b26bae33ff20d321c2470c9278176489df3c074abe583909e9d6b57d78563087e978d4d0ba41795b3c7c78009fdf07fc56a11f122370658a353aaa542ed63e44c4bc15ff4cd105ab33c536d98837f2dd165a55d5eeae91485954472d56f246df256bf3cae19352a123c70163fbe26a0fe183a33721e27768c4d087c41856d337912817381e963e61f4c118c1b711faafc66713f508587bfb9acca244bd684774e79a0586deef14f9beaf8d83b19af3ec3c9aa66f14dff480d26290572453f306e5ca4d1f045bcbe126458ce50890b160491aa56283b06563381a602d3303ba6b0d01dbee462499d92cb",
        },
        strategyValidator: {
          withdrawableEpoch: "18446744073709551615",
          withdrawableEpochProof:
            "0xffffffffffffffff000000000000000000000000000000000000000000000000520cc47c38af7c1a550b6f04a1de72582ceebd40bb079dfb08d97d3849da57de5adf0d67aada66648eb16735ee94b3072d3e51089fc055cbed4f83deb04920e66fd3d5b491f8e01dcc16ae28ed83ea7e886e98441c54683afa82077f603159228f49415c2f4721fc768f96a2dd1b2b1ad878991d41e6860294272d0fd2676a31128c71d66a18a694d57d6d5ae00429f708645d331679f2725ce3ca72000b5d907e6dffb1a86f28817d276ddffb9bd1a2b93a47e4d0dd0d75dc99cb4c1663a66ddbf2d7057b4617986deaf899b69022e52f4bf71da895bf17a41e309d51ac606564f69990eee0c920cbb35356b60773be81d2b78ba07562429a0ba3aa4667632307da7890c1471301e45ffa789711b65f7d2af7d3938c9a827d9afed9274e1b1ce768bb92d8a2cbf150adc0493cab89a0cb4124b6a2a9d77dccc46c7f67a47c03a3f4d0c7eb2158a4b5e2d0d974305d2d47b81179475e441f7cd57ea48354f24306c43d74dc1ac499e8ed8b23f09b95ac2a73e8d7b990fcad2470dfb46fcbbdddad148590d97070c7f2dfc63a6164c7a7ef999ac94189a9d6f52d6759115c67c7e65bce08d115165d11bf8e92fdaa3c26555f018f4ad9636fbc13fe57c60f99847e341de148a947ab32f730c4fc234343bb4e7dace59e00ba7442afa80882af5132c15e0937942b2f1d6240227661a536bbd079f406f38aa77a99cc28c2d274a30bbb48cf4622271afaea2f4e4968be4ef42736d7305452627cf0c38480ae59694f6e782a2faf0adb907749ab171b4a7f260e07e2a655198e3b88bc4ded5d07bd168ba9f0d826ed4630be89c7f53e067093bcc3a0d18c38fb37c284eadca114e68d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a4f893e908917775b62bff23294dbbe3a1cd8e6cc1c35b4801887b646a6f81f17fcddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaab2291dc610ded7da1e5513f149afb44b93bff4e6dcb0935a1007a4b576620c3dfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a467657cdd2986268250628d0c10e385c58c6191e6fbe05191bcc04f133f2cea72c1c4848930bd7ba8cac54661072113fb278869e07bb8587f91392933374d017bcbe18869ff2c22b28cc10510d9853292803328be4fb0e80495e8bb8d271f5b889636b5fe28e79f1b850f8658246ce9b6a1e7b49fc06db7143e8fe0b4f2b0c5523a5c985e929f70af28d0bdd1a90a808f977f597c7c778c489e98d3bd8910d31ac0f7c6f67e02e6e4e1bdefb994c6098953f34636ba2b6ca20a4721d2b26a886722ff1c9a7e5ff1cf48b4ad1582d3f4e4a1004f3b20d8c5a2b71387a4254ad933ebc52f075ae229646b6f6aed19a5e372cf295081401eb893ff599b3f9acc0c0d3e7d328921deb59612076801e8cd61592107b5c67c79b846595cc6320c395b46362cbfb909fdb236ad2411b4e4883810a074b840464689986c3f8a8091827e17c32755d8fb3687ba3ba49f342c77f5a1f89bec83d811446e1a467139213d640b6a74f7210d4f8e7e1039790e7bf4efa207555a10a6db1dd4b95da313aaa88b88fe76ad21b516cbc645ffe34ab5de1c8aef8cd4e7f8d2b51e8e1456adc7563cda206f6288210000000000000000000000000000000000000000000000000000000000c6341f0000000000000000000000000000000000000000000000000000000000c3eebb66d1773a407990ed0f85624b0371733c9876ac0b5f3b31a10c7c76742dfa93a180bb0f287cf9fd7d37aeb16ab58d2237837b155005b5eb4b40c8956fce933f0a82f86b96fba65cde6463518f01021a9c233ba66b2d5379bf89e26edd0281b17309e3100490fd577aac90437622435b8e04542dafd6e7014594250bd0c9205a0fa5e7c54a345c6046cd7a1b1f19fa499f6eeee54155591686d85774a5c8118c1b711faafc66713f508587bfb9acca244bd684774e79a0586deef14f9beaf8d83b19af3ec3c9aa66f14dff480d26290572453f306e5ca4d1f045bcbe126458ce50890b160491aa56283b06563381a602d3303ba6b0d01dbee462499d92cb",
        },
        processedBeaconBlockRoot:
          "0x342e7b37fa2b16afb4edad685b23bd3092db388d344c6e88d1fa4cb70a6ecebb",
      };

      // Set BeaconRoot for timestamp
      let nextBlockTimestamp = calcBlockTimestamp(
        depositProofs.firstPendingDeposit.slot + 1
      );
      await beaconRoots["setBeaconRoot(uint256,bytes32)"](
        nextBlockTimestamp,
        depositProofs.processedBeaconBlockRoot
      );

      await compoundingStakingStrategy
        .connect(registratorSigner)
        .verifyDeposit(
          pendingDepositRoot,
          depositProofs.firstPendingDeposit.slot,
          depositProofs.firstPendingDeposit,
          depositProofs.strategyValidator
        );

      // Get the current block timestamp
      const { timestamp: currentTimestamp } = await ethers.provider.getBlock(
        "latest"
      );
      nextBlockTimestamp = currentTimestamp;
      await beaconRoots["setBeaconRoot(uint256,bytes32)"](
        // I don't know why I need to add 2 seconds here to make the test pass
        nextBlockTimestamp + 2,
        "0x492ca8b383b068e96076ac81861f7c9df3893380df1dfdd255580eee93f316f2"
      );

      await compoundingStakingStrategy
        .connect(registratorSigner)
        .snapBalances();

      //   const snappedBalances = await compoundingStakingStrategy.snappedBalance();
      //   console.log(`Snapped timestamp ${snappedBalances.timestamp}`);

      // Balance proofs after the deposit to validator 13498458 has been verified.
      // Note
      const balanceProofs = {
        balancesContainerRoot:
          "0x6995414b5027ce4f13126b58dfda037327df40b4e4caed437de5241ce5419d7a",
        balancesContainerProof:
          "0x9ef4cccee8dc7060e9de6f8b1c3c63f643a15235264c82f69cf4153c122277e2c1674ae5ce9743f5f0c0fe49a554ac3e0a07637f10dc6d2786d7f038a2c9041111199c0a215fcbcb2274e0515e6644c67c911bffbb730c09afdfb6dca9db0aee22570331b3507baa624aebba707a25754d4c3707f119695ad3a67211c99152a8117d285d4b276befc90c9cad299dc34229e5ab250d90867eb76e3d851a0da1bf7468f92714f8ca669c4e45aa1e4c80eabd6caf9c7194e1315558e27cb020c78775d0c93bc8b817528865773204692917697c6a48acc23c6d8a8b842101dac2a0045a8b37f0b605a94493b3052b5ba40d2b9b339737b97aa4ae4f0ef000dc03e173c114ccad3b9049f7f03e9fb1dd6b0db33c9ae9eb178b6dc64deebaa08bfb37",
        validatorBalanceLeaves: [
          "0x59747c7307000000aa52ac9526000000bc617c730700000000ca9a3b00000000",
          "0xd3c400790700000000ca9a3b0000000099b57973070000002db5797307000000",
          "0x37ac7573070000008370757307000000b5a375730700000000a5269107000000",
          "0xf94c747307000000c75574730700000000ca9a3b00000000e667747307000000",
        ],
        validatorBalanceProofs: [
          "0xb88c7c7307000000a59e7c7307000000b29e7c7307000000f9af7c73070000008f5969aa3f8e15cd4c7a5f9a4ceba24149b3bbf41fc6d3c15b84ebb632b6314df4162b8317cd642c9ef816b902766f34354e3dfea5b4454d222208b251262016b26226cde9806285f113fa2fd5948813921f00ce344ecbb567837ec131a5a63c3da870526d90e9a4843103bcf27c75da34734ecd44773fedf814275399966d89e8619c93b944e1a82cf789ed61a044d5326f8e2c8078777687bf57fb0947dfee24d1a091df851ac3278f7d832b3744af4d2d434a272f97e55945b30431a80d821a6cf1f8e6f0c5404ed438ad797fdcf85baf08c85ca1f179c99d64c5dc4050812f04178e29a24d35ec69afa45008fbfee225ff520f5c29a57974a6793187e2c836c7230cd064f1337edca28dae16f574363ea24f91428492250da31517309cca8e9db73185ab23694fe101e9ae1e4332189b82a6999ce100366c034826b411a1ba3d47e631c631555a6f02c0943d7a8b9ec7c20e4b644606ab9fe7c49b443469e17d6e2e1ecd327411aba24cef1b03bcf1738c0e39779e13bbde4fd3785dd1aaa9a21345c5fbac1d8e88477f7f456511bf6d2b30feeaf9008f2db4199b8dbe25e260d81f8dd323be3ae628f09841b1115015f2a060f26f268a19f1bdaae38d8cd49a7502ffcfb0340b1d7885688500ca308161a7f96b62df9d083b71fcc8f2bb8fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a40056544dfb1501bb4de2fe43938d79d361e83bdc667d0ec280692fb26b4e66f4cddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a467657cdd2986268250628d0c10e385c58c6191e6fbe05191bcc04f133f2cea72c1c4848930bd7ba8cac54661072113fb278869e07bb8587f91392933374d017bcbe18869ff2c22b28cc10510d9853292803328be4fb0e80495e8bb8d271f5b889636b5fe28e79f1b850f8658246ce9b6a1e7b49fc06db7143e8fe0b4f2b0c5523a5c985e929f70af28d0bdd1a90a808f977f597c7c778c489e98d3bd8910d31ac0f7c6f67e02e6e4e1bdefb994c6098953f34636ba2b6ca20a4721d2b26a886722ff1c9a7e5ff1cf48b4ad1582d3f4e4a1004f3b20d8c5a2b71387a4254ad933ebc52f075ae229646b6f6aed19a5e372cf295081401eb893ff599b3f9acc0c0d3e7d328921deb59612076801e8cd61592107b5c67c79b846595cc6320c395b46362cbfb909fdb236ad2411b4e4883810a074b840464689986c3f8a8091827e17c32755d8fb3687ba3ba49f342c77f5a1f89bec83d811446e1a467139213d640b6a74cc88210000000000000000000000000000000000000000000000000000000000",
          "0x87b479730700000068a3797307000000148879730700000074cf7973070000006c2a2d879fb00aa336554bd9a16365ef9237e90080aa7bf34b3bec8edc3e6a3a22d8f4cc9c1eb3045bdbcd26ebd040602fdcb2105442d84da21cf7eb218e281689f646b35a49de93fe3a9a226e8e43400474d0644a9d7a83ca076aee9bf69b04c25f8d179f1fca99078ed347d55706c6b050d7f5ae9e7d2b6741b1456258f437177bb8ddd022049ee63dc85167e6f9a1c50eb114b8eef97fc3ad90e035708c83998c67fe264e4cb946720ce51e35a432fd9c7592152071b1ef7da7be000b91bfdb4f926fc69276c88159e94786e98bddbbb976dfeb211a8ac3437ca4c0a345d9d62eb5b42fdb877e8741215ab7be95e67b2ed6dab68172b639cb4e87a182d60e4f0bbb3dcb43e600a14dda3d46f0d60445d5fab061109c7c7e0ae915897c72b6d673e27bf956bca863bc6b9f2aa4d127d09313cddd6a771ac3217b7d7895c81c873f4a275c168df0d717b24815d18f931b144cb781cce84d1dd6fb0ae8539f88e17d6e2e1ecd327411aba24cef1b03bcf1738c0e39779e13bbde4fd3785dd1aaa9a21345c5fbac1d8e88477f7f456511bf6d2b30feeaf9008f2db4199b8dbe25e260d81f8dd323be3ae628f09841b1115015f2a060f26f268a19f1bdaae38d8cd49a7502ffcfb0340b1d7885688500ca308161a7f96b62df9d083b71fcc8f2bb8fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a40056544dfb1501bb4de2fe43938d79d361e83bdc667d0ec280692fb26b4e66f4cddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a467657cdd2986268250628d0c10e385c58c6191e6fbe05191bcc04f133f2cea72c1c4848930bd7ba8cac54661072113fb278869e07bb8587f91392933374d017bcbe18869ff2c22b28cc10510d9853292803328be4fb0e80495e8bb8d271f5b889636b5fe28e79f1b850f8658246ce9b6a1e7b49fc06db7143e8fe0b4f2b0c5523a5c985e929f70af28d0bdd1a90a808f977f597c7c778c489e98d3bd8910d31ac0f7c6f67e02e6e4e1bdefb994c6098953f34636ba2b6ca20a4721d2b26a886722ff1c9a7e5ff1cf48b4ad1582d3f4e4a1004f3b20d8c5a2b71387a4254ad933ebc52f075ae229646b6f6aed19a5e372cf295081401eb893ff599b3f9acc0c0d3e7d328921deb59612076801e8cd61592107b5c67c79b846595cc6320c395b46362cbfb909fdb236ad2411b4e4883810a074b840464689986c3f8a8091827e17c32755d8fb3687ba3ba49f342c77f5a1f89bec83d811446e1a467139213d640b6a74cc88210000000000000000000000000000000000000000000000000000000000",
          "0x86a375730700000045b57573070000002d9b75730700000003a475730700000092890d09cd46f695fd7ca1de875dce48afaa28775ee18370e8b51b4de883575a612a2278eaf56dad782299481347cb637e366ee766dc503ba1146ce332eb1955d2555d41a64fec26a36dd25397e0abb92210d6d3f3baf8008030c9988266ab10c0e856112c01523992874624fdcfc3233c1ae78511469b83b419586e980e7ee4dc121a0f323b2aa4ec733978e4c4a42dcc05fe8b6ed44997c288e5cfc345f7530ec53950329b6dbf628ec993b23e935989c3ae11e09386f35d6e1cea725399b3f0c3cb9e5cc5594bf2156a85e879a37482359457df2985a0283b1f93a9a8a4ef4706252d482824a7a447922822a33bd74efe59f9941a72c6305b520938977aabb459770820dbbdbdd4d64109779708fde7cfa5e0dc3f2b38255bf1f40b7db2f8100b92fd661c9922284d70bc4c2fea9394c14bb0303ad884e668935f43410ac693eabd76b3dc2c1ae1580b1c35b82c425953789720615a030e2c52942bb2ade89aaf35b97a67523a4ca8043e50f253cff6da9c7b54646f2a5daf174e94ca8e68383e3a42255401c28f88047b910f693fea1ec3dab636ee5320f98ec28cade9425c3995afdf398dc70f4924a5d9137cbf150a83bbd5b60b319f8fffc4f817a65ed49a7502ffcfb0340b1d7885688500ca308161a7f96b62df9d083b71fcc8f2bb8fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a40056544dfb1501bb4de2fe43938d79d361e83bdc667d0ec280692fb26b4e66f4cddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a467657cdd2986268250628d0c10e385c58c6191e6fbe05191bcc04f133f2cea72c1c4848930bd7ba8cac54661072113fb278869e07bb8587f91392933374d017bcbe18869ff2c22b28cc10510d9853292803328be4fb0e80495e8bb8d271f5b889636b5fe28e79f1b850f8658246ce9b6a1e7b49fc06db7143e8fe0b4f2b0c5523a5c985e929f70af28d0bdd1a90a808f977f597c7c778c489e98d3bd8910d31ac0f7c6f67e02e6e4e1bdefb994c6098953f34636ba2b6ca20a4721d2b26a886722ff1c9a7e5ff1cf48b4ad1582d3f4e4a1004f3b20d8c5a2b71387a4254ad933ebc52f075ae229646b6f6aed19a5e372cf295081401eb893ff599b3f9acc0c0d3e7d328921deb59612076801e8cd61592107b5c67c79b846595cc6320c395b46362cbfb909fdb236ad2411b4e4883810a074b840464689986c3f8a8091827e17c32755d8fb3687ba3ba49f342c77f5a1f89bec83d811446e1a467139213d640b6a74cc88210000000000000000000000000000000000000000000000000000000000",
          "0xca70747307000000a30d3dbf340000007e4d7473070000005b4f7473070000003324b8a4892099160d90a0a5189d95d7c6c382a52c57dab0d1406e02dfbc17fec49089dc999e4435f331db221f6d61573aca5be408f0b020e8fa2b35726918d3aef681e4e3a8ba563fa687c1b5809195203076505029c007c57980745fc3abc46a5c8fa6beec65b3e98272f96cee75ae7a8aec820ccc982c162c5397b26b6e1ef35f1607d21dca98fe00afa77b7ce95d569ff18a99426c2559b0f87521f5cf33445bacc875da6b1a4e2b619d7cd5e804f5b6916430a29b967846a96075f74d5d4bcb5cd52ffa0b854aa9f820c707d38c7faed1ecc9a181def9d751c25a0e8ba5b0abd8e3be7ef28bedafa152a5d86b00a1d3c6b48e8c2ee694629bf99684c2a2dbeef9a797dde91054daec108a395e84fa3190a780544ac7093979a6d92dcb1f4ea442d7ceb3e7e215a9dd8119923155c00061aeb31cc13c7ef11a03ffc4ceb56aaec75fa00134b28b0f41ed6c0eb852c67d5dbe1cea236ecea1d4f2415feee16d9f03891545694a6bfb23b7dac67afd90abfe53debe61a3b52e5ac9c25246ad383e3a42255401c28f88047b910f693fea1ec3dab636ee5320f98ec28cade9425c3995afdf398dc70f4924a5d9137cbf150a83bbd5b60b319f8fffc4f817a65ed49a7502ffcfb0340b1d7885688500ca308161a7f96b62df9d083b71fcc8f2bb8fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a40056544dfb1501bb4de2fe43938d79d361e83bdc667d0ec280692fb26b4e66f4cddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a467657cdd2986268250628d0c10e385c58c6191e6fbe05191bcc04f133f2cea72c1c4848930bd7ba8cac54661072113fb278869e07bb8587f91392933374d017bcbe18869ff2c22b28cc10510d9853292803328be4fb0e80495e8bb8d271f5b889636b5fe28e79f1b850f8658246ce9b6a1e7b49fc06db7143e8fe0b4f2b0c5523a5c985e929f70af28d0bdd1a90a808f977f597c7c778c489e98d3bd8910d31ac0f7c6f67e02e6e4e1bdefb994c6098953f34636ba2b6ca20a4721d2b26a886722ff1c9a7e5ff1cf48b4ad1582d3f4e4a1004f3b20d8c5a2b71387a4254ad933ebc52f075ae229646b6f6aed19a5e372cf295081401eb893ff599b3f9acc0c0d3e7d328921deb59612076801e8cd61592107b5c67c79b846595cc6320c395b46362cbfb909fdb236ad2411b4e4883810a074b840464689986c3f8a8091827e17c32755d8fb3687ba3ba49f342c77f5a1f89bec83d811446e1a467139213d640b6a74cc88210000000000000000000000000000000000000000000000000000000000",
        ],
        // validatorBalances: [1.0, 1.0, 32.25, 1.0],
      };
      const pendingDepositProofs = {
        pendingDepositContainerRoot:
          "0x3f4538dfea53b8b775fd5a2d81d6304a472e45d6d2cfc72b8b0b83a0f94cb877",
        pendingDepositContainerProof:
          "0x48553dd42a9dfdac82684488af5f74b7327001871fdd52b7724a19bfa36b68dc002457a8817ca724a409c70e35437e46db95809266dc3fa8966b9f3a009f500fac9385084bcff2840a7f9db6c71fc4ac09182d8a8a0fa40aef635ae077b9dd53c78009fdf07fc56a11f122370658a353aaa542ed63e44c4bc15ff4cd105ab33c536d98837f2dd165a55d5eeae91485954472d56f246df256bf3cae19352a123cbaae8f732c6d16b997b9f7e6f147e367febf1ba208a545b9876535c60c73765875d0c93bc8b817528865773204692917697c6a48acc23c6d8a8b842101dac2a0045a8b37f0b605a94493b3052b5ba40d2b9b339737b97aa4ae4f0ef000dc03e173c114ccad3b9049f7f03e9fb1dd6b0db33c9ae9eb178b6dc64deebaa08bfb37",
        pendingDepositIndexes: [
          "16125",
          "20174",
          "20187",
          // "20188",
          "36818",
          "20189",
        ],
        pendingDepositProofs: [
          "0xde084420e7c248e5ec187ee961891ddd648574c0e31a930cb4c8b8b96d52e497631440e41321b5629c6b91f6b35b12b3ac57bbf8bb6dbf717a1c3f865036fab5a547fa6c7b3963075190b3d05218a7a8848c723ac71508df61fdc6f8f9137ffcab9051aca84f5e99e220d5ae1c3a0155c25560c9e562fc31bf3b7152fd54353069420c851909b08819b856eeeb97596b18266f7208665fb6eafb46a7214188ead28545c2a83ddcf7223213d12862c457b01bbab1438166b227ba66bc249ff13815820d34a02a08787919f4bfb5a8d32d71b7756ab82571afd2d287c71b94b4e6022f0cef458b832cd9c7735de62d6d5b373630e12af4aa5664526b9c399ad1a2acbbdf9f5636e16678b8ab77ca2e87926edfe196bc48d4f21dc9a8f85b2ce9720071b2ea0ca37e00a1f7c00a1d291d25512b0f13caae655a17a3117e690551af81a3effd16b3f5d9b995e74eec0ea018a08d3d75a745b9f0fcd75a4214a60b9d4e2ba384ce71bb7593c53ebc2604b4ac4d7e538689bec412451f2751304b11cdd3027f63ad6ef718efdc9a3157f45b4d44b6fc919b914fa937fd4782e8b66d3d7400e561663fd8e1bbf4930c9ec9590fc2444a0170f919771cf8af09044c61597173fff6cd59274fe5d2474baf7b9eb2f941db27a2ca7e97bd76f0317d0d79292fddf4944c42a46643562591cb6f1d8fa07e9a015c2a338e1df905cbbbcd48f78fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a4f893e908917775b62bff23294dbbe3a1cd8e6cc1c35b4801887b646a6f81f17fcddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a4676585a7000000000000000000000000000000000000000000000000000000000000",
          "0x81b86e6ff3bf3adc1a2bd5b0a3af7590ad260c23010d7277713ac3aa413d55cc861917109493f9ef33b005d23bc421c4ad126874860b43f9ffe53b950e2d6e1434484f7c4ac5ad22c3e87adcd911cb5c03fbe73586d3de4d70124a15f2c51ea7c75582ac2239aa58d5aed8822e6a588b88fa925f63a8d51b000e5956c7aefa47c4562b44024b87d2c35b167096b1a7476b166c5a6714a21f733e75926441c018fa7b6a66943361b1543a36c38dcbad1341464b5c149bb22e80093866f7e6e9262be2ebc1c4b9928fbaeec25415bdf1d817345607bd9026fb1e004240944c33a928a633e2934fad1d6ac4ac7bd58e32f9d096a0d127facebf5e6f2f5801814b37c2c554ce2d0217340b989eeecb24366f8bfdbe5d7b92ab806835d4c1762f0cfc737f3573cab99b578272948ed38adb8074d8097ad71f549535df336ce982615912dd0657c97850004d821aab6447f1b11556e7fecd0caa4f2dd2d38f9cb802cc034fab455f4267f1e37d587416659a666ddf8a0254d04fe2e15d83c0a1d71b957fb4ff8388015fbca1ec0a28edb71e37f0faf37a7ce59b0863260699a67db522dbd9e07053bcbf20e3454383f069941efb551588d9a5cd586a2654b1d3de1cd0965df39ca7c6eb863cc1d64ebc8c995aab2291a4771dc8ae58819a89b540df742fddf4944c42a46643562591cb6f1d8fa07e9a015c2a338e1df905cbbbcd48f78fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a4f893e908917775b62bff23294dbbe3a1cd8e6cc1c35b4801887b646a6f81f17fcddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a4676585a7000000000000000000000000000000000000000000000000000000000000",
          "0x2908006b378e481f4273105b0adba5522fd7e22f048c343f4b797b987290fe6b32af4de7bf1ce72b243a7e31e50cf2f3b8675c0aa31f8cce824b31d3367aa603780ea07a1f9a8bd5babf30d6e2242ef2e7965a2b50a6b14d5194bd984c409f8a330eecb6469dd3c59cb8824d9898e4cc5c3b0ba0957091147e15a4868591dc6a9fe48393f3f636b78717bee3ae9dc1e7d0bdabff671b55836a41876775681357fa7b6a66943361b1543a36c38dcbad1341464b5c149bb22e80093866f7e6e9262be2ebc1c4b9928fbaeec25415bdf1d817345607bd9026fb1e004240944c33a928a633e2934fad1d6ac4ac7bd58e32f9d096a0d127facebf5e6f2f5801814b37c2c554ce2d0217340b989eeecb24366f8bfdbe5d7b92ab806835d4c1762f0cfc737f3573cab99b578272948ed38adb8074d8097ad71f549535df336ce982615912dd0657c97850004d821aab6447f1b11556e7fecd0caa4f2dd2d38f9cb802cc034fab455f4267f1e37d587416659a666ddf8a0254d04fe2e15d83c0a1d71b957fb4ff8388015fbca1ec0a28edb71e37f0faf37a7ce59b0863260699a67db522dbd9e07053bcbf20e3454383f069941efb551588d9a5cd586a2654b1d3de1cd0965df39ca7c6eb863cc1d64ebc8c995aab2291a4771dc8ae58819a89b540df742fddf4944c42a46643562591cb6f1d8fa07e9a015c2a338e1df905cbbbcd48f78fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a4f893e908917775b62bff23294dbbe3a1cd8e6cc1c35b4801887b646a6f81f17fcddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a4676585a7000000000000000000000000000000000000000000000000000000000000",
          // "0x8d6407d8673c273906f9d122bb09f29a3c3ef33cbda71dee5c81103b28697cc60744b6daea7a9e386f9927235f9863155f970f3a9aa0b14e55eb9f57041e776f02db47ebd170120bd411933ac04ddcd7b9e41dd4e50b7e87501aaa7eaa6d8d57330eecb6469dd3c59cb8824d9898e4cc5c3b0ba0957091147e15a4868591dc6a9fe48393f3f636b78717bee3ae9dc1e7d0bdabff671b55836a41876775681357fa7b6a66943361b1543a36c38dcbad1341464b5c149bb22e80093866f7e6e9262be2ebc1c4b9928fbaeec25415bdf1d817345607bd9026fb1e004240944c33a928a633e2934fad1d6ac4ac7bd58e32f9d096a0d127facebf5e6f2f5801814b37c2c554ce2d0217340b989eeecb24366f8bfdbe5d7b92ab806835d4c1762f0cfc737f3573cab99b578272948ed38adb8074d8097ad71f549535df336ce982615912dd0657c97850004d821aab6447f1b11556e7fecd0caa4f2dd2d38f9cb802cc034fab455f4267f1e37d587416659a666ddf8a0254d04fe2e15d83c0a1d71b957fb4ff8388015fbca1ec0a28edb71e37f0faf37a7ce59b0863260699a67db522dbd9e07053bcbf20e3454383f069941efb551588d9a5cd586a2654b1d3de1cd0965df39ca7c6eb863cc1d64ebc8c995aab2291a4771dc8ae58819a89b540df742fddf4944c42a46643562591cb6f1d8fa07e9a015c2a338e1df905cbbbcd48f78fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a4f893e908917775b62bff23294dbbe3a1cd8e6cc1c35b4801887b646a6f81f17fcddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a4676585a7000000000000000000000000000000000000000000000000000000000000",
          "0x9b06f36ea5e8e7ba833832a61c9facb8db666134bba4e1c5ef74f4174a9e43a4f287676c3c8d529902661b72684a57e9318037d019dc90d1fa8a352cee40d746e6c83efc778d175e2e26b6d615bb09e6dc9e8a7faf2b9df5d435bcaee84ed17628e5f8cad12d85a46fcb47cec509eaff39630c382a0f9e2b26789f6a180b783a5f9ff4aef0fcca5debf3552b23729f394ba1e984d304c113878d825ada4b34b8a044bf78e701940f57f2a0182d7ebcb34a6fc7538b59e243769966d6294f9d410cbaf821253ae4e8e288cc12337b11c5fd2903edf71118c3f24ddeb5cd4d6e3132e96d5440cc7df874f407d7422061ff009b0689f062b6351fa654c65c2f4f9cf41be15939f6f1a0f4068dc2bffbfaf194b02e6a9795b69aa931568ccd57b9814cad544aa403b45d7cf64c22d00ee3783c78bf15459003a4cadb5d02ea9a5192aec478c335df3fcee7c965a37ecaf2faf8bce90e9cb5799ece247fd510d7fc2f7ad24600384b323af6bdc06a9a6f9b1052ffc6e6ba4a8e32f3b51ba4f028423b2535ee46b42e9685b6c864635c1d5cf99dc4c9970191a3c2f0f8797e010a1fc96418b216f1c9962decd51ab1088afb80c2eb5052519d6c43f0e23e0deafe5d80b58d900f5e182e3c50ef74969ea16c7726c549757cc23523c369587da72937846d98b279a0e45ee4db37a77bf730093ab56c01b4c24172f889cdd4b54fa33ed98fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a4f893e908917775b62bff23294dbbe3a1cd8e6cc1c35b4801887b646a6f81f17fcddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a4676585a7000000000000000000000000000000000000000000000000000000000000",
          "0x78064553d435f3967fac15770e814581d47ff07d01f38e35450cb0c45fc17cae0744b6daea7a9e386f9927235f9863155f970f3a9aa0b14e55eb9f57041e776f02db47ebd170120bd411933ac04ddcd7b9e41dd4e50b7e87501aaa7eaa6d8d57330eecb6469dd3c59cb8824d9898e4cc5c3b0ba0957091147e15a4868591dc6a9fe48393f3f636b78717bee3ae9dc1e7d0bdabff671b55836a41876775681357fa7b6a66943361b1543a36c38dcbad1341464b5c149bb22e80093866f7e6e9262be2ebc1c4b9928fbaeec25415bdf1d817345607bd9026fb1e004240944c33a928a633e2934fad1d6ac4ac7bd58e32f9d096a0d127facebf5e6f2f5801814b37c2c554ce2d0217340b989eeecb24366f8bfdbe5d7b92ab806835d4c1762f0cfc737f3573cab99b578272948ed38adb8074d8097ad71f549535df336ce982615912dd0657c97850004d821aab6447f1b11556e7fecd0caa4f2dd2d38f9cb802cc034fab455f4267f1e37d587416659a666ddf8a0254d04fe2e15d83c0a1d71b957fb4ff8388015fbca1ec0a28edb71e37f0faf37a7ce59b0863260699a67db522dbd9e07053bcbf20e3454383f069941efb551588d9a5cd586a2654b1d3de1cd0965df39ca7c6eb863cc1d64ebc8c995aab2291a4771dc8ae58819a89b540df742fddf4944c42a46643562591cb6f1d8fa07e9a015c2a338e1df905cbbbcd48f78fe6b1689256c0d385f42f5bbe2027a22c1996e110ba97c171d3e5948de92beb8d0d63c39ebade8509e0ae3c9c3876fb5fa112be18f905ecacfecb92057603ab95eec8b2e541cad4e91de38385f2e046619f54496c2382cb6cacd5b98c26f5a4f893e908917775b62bff23294dbbe3a1cd8e6cc1c35b4801887b646a6f81f17fcddba7b592e3133393c16194fac7431abf2f5485ed711db282183c819e08ebaa8a8d7fe3af8caa085a7639a832001457dfb9128a8061142ad0335629ff23ff9cfeb3c337d7a51a6fbf00b9e34c52e1c9195c969bd4e7a0bfd51d5c5bed9c1167e71f0aa83cc32edfbefa9f4d3e0174ca85182eec9f3a09f6a6c0df6377a510d731206fa80a50bb6abe29085058f16212212a60eec8f049fecb92d8c8e0a84bc021352bfecbeddde993839f614c3dac0a3ee37543f9b412b16199dc158e23b544619e312724bb6d7c3153ed9de791d764a366b389af13c58bf8a8d90481a4676585a7000000000000000000000000000000000000000000000000000000000000",
        ],
      };

      await consolidationController
        .connect(registratorSigner)
        .verifyBalances(balanceProofs, pendingDepositProofs);
    });
    it("Should request consolidation of a single validator", async () => {
      const targetPubKeyHash = hashPubKey(activeTargetPubKey);
      const validatorData = await compoundingStakingStrategy.validator(
        targetPubKeyHash
      );
      console.log(validatorData);
      expect(validatorData.state).to.equal(4); // Active status

      await consolidationController
        .connect(adminSigner)
        .requestConsolidation(
          nativeStakingStrategy2.address,
          [secondClusterPubKeys[0]],
          activeTargetPubKey,
          { value: 1 }
        );
    });
    // - Should request consolidation of a single validator
    // - Should request consolidation of multiple validator
    // - Should request consolidation of a lot of validator
    // - Should request consolidation when another compounding validator has pending deposit
    // - Should fail to request consolidation when there's an active consolidation
    // - Should fail to request consolidate from a validator that is EXITING state
    // - Should fail to request consolidate from a validator that is EXIT_COMPLETE sate
    // - should fail to request consolidation from an invalid source validator
    // - should fail to request consolidation to an invalid target validator
    // - should fail to request consolidation to a validator that is STAKED
    // - Should fail to request consolidation to a target validator that has a pending deposit
    // - Should fail to request consolidation if not validator registrator
  });
});
